<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Combo Tool</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <style>
        .ss-color {
            color: #0d6efd;
        }

        .cs-color {
            color: #198754;
        }

        .highlight-low {
            background-color: #f8d7da;
        }

        .highlight-savings {
            background-color: #d1e7dd;
        }
    </style>
</head>

<body class="container py-5">
    <h1 class="mb-4">Combo Tool</h1>

    <div class="mb-3">
        <label for="categoryDropdown" class="form-label">Select Categories</label>
        <select id="categoryDropdown" multiple class="form-select"></select>
    </div>

    <div class="mb-3">
        <label for="tierFilter" class="form-label">Select Membership Tier</label>
        <select id="tierFilter" class="form-select">
            <option value="SuperSaver">SuperSaver</option>
            <option value="ClubSaver">ClubSaver</option>
            <option value="Both">Both</option>
        </select>
    </div>

    <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="useSSForCS" checked>
        <label class="form-check-label" for="useSSForCS">
            Use SS% when CS% is not available
        </label>
    </div>

    <div class="mb-3">
        <label for="threshold" class="form-label">Minimum Combo Threshold</label>
        <input type="number" class="form-control" id="threshold" value="10">
    </div>

    <button class="btn btn-primary mb-4" onclick="generateCombos()">Generate Combos</button>

    <div id="results"></div>
    <div id="summary"></div>

    <div class="mt-5" id="manualSection" style="display: none;">
        <h4>Manual Anchor & Savings Selection</h4>
        <div class="row">
            <div class="col-md-6">
                <label for="anchorSelect" class="form-label">Select Anchor Cards</label>
                <select id="anchorSelect" multiple class="form-select"></select>
            </div>
            <div class="col-md-6">
                <label for="savingsSelect" class="form-label">Select Savings Cards</label>
                <select id="savingsSelect" multiple class="form-select"></select>
            </div>
        </div>
        <div class="mt-3">
            <button class="btn btn-success" onclick="applyManualSelection()">Apply Manual Selection</button>
        </div>
        <div id="manualSummary" class="mt-4"></div>
    </div>

    <div id="singleAdjustmentSection" class="mt-4" style="display: none;">
        <div id="adjustmentConfig">
            <h5>Adjustment Settings</h5>
            <div class="row">
                <div class="col-md-4">
                    <label for="gapFactor" class="form-label">Gap Factor (%)</label>
                    <input type="number" class="form-control" id="gapFactor" value="2.5" step="0.1">
                </div>
                <div class="col-md-4">
                    <label for="maxReduction" class="form-label">Max Reduction (%)</label>
                    <input type="number" class="form-control" id="maxReduction" value="5" step="0.1">
                </div>
            </div>
              
            <div class="mt-3">
                <button class="btn btn-warning" onclick="adjustSingleCards()">Apply Adjustments to Single Cards</button>
            </div>
        </div>
    
        <div id="adjustedCardResults" class="mt-4"></div>
    </div>
    



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <!-- <script src="./combo-tool-v2-script.js"></script> -->
    <script src="./combo-tool-v3-script.js"></script>


</body>

</html>